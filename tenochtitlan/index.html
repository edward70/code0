<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Night at Tenochtitlan</title>
    <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.1.2/dist/aframe-extras.min.js"></script>
    <style>
    body {
        margin: 0;
    }
    #overlay {
        position: fixed;
        width: 100%;
        height: 100%;
        top: 0; 
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #000;
        z-index: 99;
        color: #fff;
        font-family: sans-serif;
    }
    #overlay h1 {
        margin: 1em;
        text-align: center;
    }
    </style>
  </head>
  <body>
    <!-- Credit: Music by Ross Bugden -->
    <div id="overlay">
        <h1>Loading...</h1>
    </div>
    <a-scene>
      <!-- Coin -->
      <a-assets>
        <img id="grass" src="grass.jpeg">
        <a-asset-item id="coin" src="scene.gltf">
      </a-assets>
      <a-gltf-model id="coin1" src="#coin" position="100 2 100" scale="0.1 0.1 0.1"></a-gltf-model>
      <a-gltf-model id="coin2" src="#coin" position="221 2 241" scale="0.1 0.1 0.1"></a-gltf-model>
      <a-gltf-model id="coin3" src="#coin" position="283 2 195" scale="0.1 0.1 0.1"></a-gltf-model>
      <a-gltf-model id="coin4" src="#coin" position="96 2 207" scale="0.1 0.1 0.1"></a-gltf-model>
      <a-gltf-model id="coin5" src="#coin" position="-12 2 301" scale="0.1 0.1 0.1"></a-gltf-model>
      <a-plane material="src:#grass; repeat: 100 100" width="700" height="700" position="0 0.01 0" rotation="-90 0 0"></a-plane>
      <a-plane material="color: #0000ff" width="2000" height="2000" position="0 -2 0" rotation="-90 0 0"></a-plane>
      <a-sky color="#000"></a-sky>
      <a-light type="ambient" color="#333"></a-light>
      <a-entity light="type: directional; color: #fff; intensity: 0.5;" position="31 80 -50"></a-entity>
      <!-- Player -->
      <a-entity movement-controls position="228 1.6 110">
          <a-entity id="player"
                camera
                look-controls="pointerLockEnabled: true">
              <a-cursor color="white"></a-cursor>
              <a-text id="score" value="Score: 0" position="-0.2 -0.5 -1" color="white" width="4" anchor="left"></a-text>
          </a-entity>
      </a-entity>
      <a-entity id="model">
        <a-collada-model id="collada" src="./tenochtitlan+center/model.dae" position="58 0 100"></a-collada-model>
      </a-entity>
    </a-scene>
    <div style="visibility:hidden">
        <audio autoplay autostart loop>
            <source src="./Sad.mp3">
        </audio> 
    </div>
    <script>
        alert("Welcome to Night at Tenochtitlan.\nIf your using a computer use the arrow keys to move and mouse to turn.\nIf your using a phone, touch to move and turn your phone to turn.\nClick on coins to get points.\n𝙋𝙇𝙀𝘼𝙎𝙀 𝙍𝙀𝙈𝙀𝙈𝘽𝙀𝙍 𝙏𝙊 𝙑𝙊𝙏𝙀 𝙁𝙊𝙍 𝙐𝙎");
        document.querySelector('#collada').addEventListener('loaded', function () {
            document.querySelector('#overlay').hidden = "true";
        });
        var score = 0;
        var coin1 = document.querySelector('#coin1');
        coin1.addEventListener('click', function (evt) { 
            score++;
            document.querySelector('#score').setAttribute('text', 'value', "Score: " + score);
            coin1.parentNode.removeChild(coin1);
        });
        var coin2 = document.querySelector('#coin2');
        coin2.addEventListener('click', function (evt) { 
            score++;
            document.querySelector('#score').setAttribute('text', 'value', "Score: " + score);
            coin2.parentNode.removeChild(coin2);
        });
        var coin3 = document.querySelector('#coin3');
        coin3.addEventListener('click', function (evt) { 
            score++;
            document.querySelector('#score').setAttribute('text', 'value', "Score: " + score);
            coin3.parentNode.removeChild(coin3);
        });
        var coin4 = document.querySelector('#coin4');
        coin4.addEventListener('click', function (evt) { 
            score++;
            document.querySelector('#score').setAttribute('text', 'value', "Score: " + score);
            coin4.parentNode.removeChild(coin4);
        });
        var coin5 = document.querySelector('#coin5');
        coin5.addEventListener('click', function (evt) { 
            score++;
            document.querySelector('#score').setAttribute('text', 'value', "Score: " + score);
            coin5.parentNode.removeChild(coin5);
        });
    </script>
  </body>
</html>